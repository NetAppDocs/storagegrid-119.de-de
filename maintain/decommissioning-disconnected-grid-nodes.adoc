---
permalink: maintain/decommissioning-disconnected-grid-nodes.html 
sidebar: sidebar 
keywords: storagegrid, disconnected nodes, decommission node 
summary: 'Möglicherweise müssen Sie einen Knoten außer Betrieb setzen, der derzeit nicht mit dem Netz verbunden ist (einen Knoten, dessen Zustand unbekannt oder administrativ ausgefallen ist).' 
---
= Abgeschaltete Netzknoten außer Betrieb nehmen
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Möglicherweise müssen Sie einen Knoten außer Betrieb nehmen, der derzeit nicht mit dem Netz verbunden ist (einen Knoten, dessen Zustand unbekannt oder administrativ ausgefallen ist).

.Bevor Sie beginnen
* Sie verstehen die Überlegungen zur Stilllegunglink:considerations-for-decommissioning-admin-or-gateway-nodes.html["Admin- und Gateway-Knoten"] und die Überlegungen zur Stilllegunglink:considerations-for-decommissioning-storage-nodes.html["Speicherknoten"] .
* Sie haben alle erforderlichen Elemente erhalten.
* Sie haben sichergestellt, dass keine Datenreparaturaufträge aktiv sind. Sehen link:checking-data-repair-jobs.html["Überprüfen Sie die Datenreparaturaufträge"] .
* Sie haben bestätigt, dass die Wiederherstellung des Speicherknotens nirgendwo im Grid läuft.  Wenn dies der Fall ist, müssen Sie warten, bis alle im Rahmen der Wiederherstellung durchgeführten Cassandra-Neuaufbauten abgeschlossen sind.  Anschließend können Sie mit der Außerbetriebnahme fortfahren.
* Sie haben sichergestellt, dass während der Knoten-Außerbetriebnahme keine anderen Wartungsvorgänge ausgeführt werden, es sei denn, die Knoten-Außerbetriebnahme wird angehalten.
* Die Spalte *Außerbetriebnahme möglich* für den oder die getrennten Knoten, die Sie außer Betrieb nehmen möchten, enthält ein grünes Häkchen.
* Sie haben die Bereitstellungspassphrase.


.Informationen zu diesem Vorgang
Sie können getrennte Knoten identifizieren, indem Sie nach dem blauen Symbol „Unbekannt“ suchen.image:../media/icon_alarm_blue_unknown.png["Symbol unbekannt"] oder das graue Symbol „Administrativ deaktiviert“image:../media/icon_alarm_gray_administratively_down.png["Symbol „Administrativ deaktiviert“"] in der Spalte *Gesundheit*.

Beachten Sie vor der Außerbetriebnahme eines getrennten Knotens Folgendes:

* Dieses Verfahren ist in erster Linie zum Entfernen eines einzelnen getrennten Knotens gedacht.  Wenn Ihr Netz mehrere getrennte Knoten enthält, müssen Sie diese gemäß der Software alle gleichzeitig außer Betrieb nehmen, wodurch das Risiko unerwarteter Ergebnisse steigt.
+

CAUTION: Wenn Sie mehrere getrennte Speicherknoten gleichzeitig außer Betrieb nehmen, kann es zu Datenverlust kommen. Sehen link:considerations-for-decommissioning-storage-nodes.html#considerations-disconnected-storage-nodes["Überlegungen zu getrennten Speicherknoten"] .

+

CAUTION: Seien Sie vorsichtig, wenn Sie Speicherknoten in einem Grid außer Betrieb nehmen, das softwarebasierte Knoten enthält, die nur Metadaten enthalten.  Wenn Sie alle Knoten außer Betrieb nehmen, die zum Speichern von _sowohl_ Objekten als auch Metadaten konfiguriert sind, wird die Möglichkeit zum Speichern von Objekten aus dem Raster entfernt.  Sehenlink:../primer/what-storage-node-is.html#types-of-storage-nodes["Arten von Speicherknoten"] Weitere Informationen zu reinen Metadaten-Speicherknoten.

* Wenn ein getrennter Knoten nicht entfernt werden kann (z. B. ein Speicherknoten, der für das ADC-Quorum erforderlich ist), kann kein anderer getrennter Knoten entfernt werden.


.Schritte
. Sofern Sie keinen Archivknoten außer Betrieb nehmen (der getrennt werden muss), versuchen Sie, alle getrennten Grid-Knoten wieder online zu bringen oder wiederherzustellen.
+
Sehenlink:warnings-and-considerations-for-grid-node-recovery.html["Verfahren zur Wiederherstellung von Grid-Knoten"] Anweisungen hierzu finden Sie unter.

. Wenn Sie einen getrennten Grid-Knoten nicht wiederherstellen können und ihn außer Betrieb nehmen möchten, während er getrennt ist, aktivieren Sie das Kontrollkästchen für diesen Knoten.
+

NOTE: Wenn Ihr Netz mehrere getrennte Knoten enthält, müssen Sie diese gemäß der Software alle gleichzeitig außer Betrieb nehmen, wodurch das Risiko unerwarteter Ergebnisse steigt.

+

CAUTION: Seien Sie vorsichtig, wenn Sie mehr als einen getrennten Grid-Knoten gleichzeitig außer Betrieb nehmen, insbesondere wenn Sie mehrere getrennte Speicherknoten auswählen.  Wenn Sie über mehr als einen getrennten Speicherknoten verfügen, den Sie nicht wiederherstellen können, wenden Sie sich an den technischen Support, um die beste Vorgehensweise zu bestimmen.

. Geben Sie die Bereitstellungspassphrase ein.
+
Die Schaltfläche *Außerbetriebnahme starten* ist aktiviert.

. Klicken Sie auf *Außerbetriebnahme starten*.
+
Es wird eine Warnung angezeigt, die darauf hinweist, dass Sie einen getrennten Knoten ausgewählt haben und dass Objektdaten verloren gehen, wenn der Knoten die einzige Kopie eines Objekts enthält.

. Überprüfen Sie die Liste der Knoten und klicken Sie auf *OK*.
+
Der Außerbetriebnahmevorgang wird gestartet und der Fortschritt wird für jeden Knoten angezeigt. Während des Vorgangs wird ein neues Wiederherstellungspaket generiert, das die Änderung der Netzkonfiguration enthält.

. Sobald das neue Wiederherstellungspaket verfügbar ist, klicken Sie auf den Link oder wählen Sie *WARTUNG* > *System* > *Wiederherstellungspaket*, um auf die Seite „Wiederherstellungspaket“ zuzugreifen. Laden Sie dann die `.zip` Datei.
+
Siehe die Anweisungen fürlink:downloading-recovery-package.html["Herunterladen des Wiederherstellungspakets"] .

+

NOTE: Laden Sie das Wiederherstellungspaket so schnell wie möglich herunter, um sicherzustellen, dass Sie Ihr Netz wiederherstellen können, falls während der Außerbetriebnahme etwas schiefgeht.

+

CAUTION: Die Datei des Wiederherstellungspakets muss gesichert werden, da sie Verschlüsselungsschlüssel und Passwörter enthält, mit denen Daten aus dem StorageGRID -System abgerufen werden können.

. Überwachen Sie regelmäßig die Seite „Außerbetriebnahme“, um sicherzustellen, dass alle ausgewählten Knoten erfolgreich außer Betrieb genommen werden.
+
Die Außerbetriebnahme von Speicherknoten kann Tage oder Wochen dauern.  Wenn alle Aufgaben abgeschlossen sind, wird die Knotenauswahlliste mit einer Erfolgsmeldung erneut angezeigt.  Wenn Sie einen getrennten Speicherknoten außer Betrieb genommen haben, zeigt eine Informationsmeldung an, dass die Reparaturaufträge gestartet wurden.

. Nachdem die Knoten im Rahmen des Außerbetriebnahmeverfahrens automatisch heruntergefahren wurden, entfernen Sie alle verbleibenden virtuellen Maschinen oder anderen Ressourcen, die mit dem außer Betrieb genommenen Knoten verknüpft sind.
+

CAUTION: Führen Sie diesen Schritt erst aus, wenn die Knoten automatisch heruntergefahren wurden.

. Wenn Sie einen Speicherknoten außer Betrieb nehmen, überwachen Sie den Status der Reparaturaufträge für *replizierte Daten* und *löschcodierte (EC) Daten*, die während des Außerbetriebnahmeprozesses automatisch gestartet werden.


[role="tabbed-block"]
====
.Replizierte Daten
--
* Um einen geschätzten Prozentsatz der Fertigstellung der replizierten Reparatur zu erhalten, addieren Sie die `show-replicated-repair-status` Option zum Befehl „repair-data“.
+
`repair-data show-replicated-repair-status`

* So stellen Sie fest, ob die Reparaturen abgeschlossen sind:
+
.. Wählen Sie *NODES* > *_Speicherknoten wird repariert_* > *ILM*.
.. Überprüfen Sie die Attribute im Abschnitt „Bewertung“.  Wenn die Reparaturen abgeschlossen sind, zeigt das Attribut *Warten – Alle* 0 Objekte an.


* So überwachen Sie die Reparatur genauer:
+
.. Wählen Sie *SUPPORT* > *Tools* > *Gittertopologie*.
.. Wählen Sie *_grid_* > *_Reparierter Speicherknoten_* > *LDR* > *Datenspeicher*.
.. Verwenden Sie eine Kombination der folgenden Attribute, um so gut wie möglich zu bestimmen, ob replizierte Reparaturen abgeschlossen sind.
+

NOTE: Möglicherweise liegen Cassandra-Inkonsistenzen vor und fehlgeschlagene Reparaturen werden nicht nachverfolgt.

+
*** *Reparaturversuche (XRPA)*: Verwenden Sie dieses Attribut, um den Fortschritt replizierter Reparaturen zu verfolgen.  Dieses Attribut erhöht sich jedes Mal, wenn ein Speicherknoten versucht, ein Hochrisikoobjekt zu reparieren.  Wenn dieses Attribut über einen Zeitraum, der länger ist als der aktuelle Scanzeitraum (bereitgestellt durch das Attribut *Scanzeitraum – Geschätzt*), nicht ansteigt, bedeutet dies, dass beim ILM-Scan auf keinem Knoten ein Hochrisikoobjekt gefunden wurde, das repariert werden muss.
+

NOTE: Hochrisikoobjekte sind Objekte, bei denen die Gefahr eines vollständigen Verlusts besteht.  Dies schließt keine Objekte ein, die ihrer ILM-Konfiguration nicht entsprechen.

*** *Scan-Zeitraum – Geschätzt (XSCM)*: Verwenden Sie dieses Attribut, um abzuschätzen, wann eine Richtlinienänderung auf zuvor aufgenommene Objekte angewendet wird.  Wenn das Attribut *Reparaturversuche* über einen Zeitraum, der länger als der aktuelle Scanzeitraum ist, nicht ansteigt, ist es wahrscheinlich, dass replizierte Reparaturen durchgeführt wurden.  Beachten Sie, dass sich der Scanzeitraum ändern kann.  Das Attribut *Scan Period – Estimated (XSCM)* gilt für das gesamte Raster und ist das Maximum aller Knoten-Scan-Perioden.  Sie können den Attributverlauf *Scan-Zeitraum – Geschätzt* für das Raster abfragen, um einen geeigneten Zeitrahmen zu bestimmen.






--
.Löschcodierte (EC) Daten
--
So überwachen Sie die Reparatur von Erasure-Code-Daten und wiederholen alle möglicherweise fehlgeschlagenen Anfragen:

. Bestimmen Sie den Status der Datenreparaturen mit Erasure Code:
+
** Wählen Sie *SUPPORT* > *Tools* > *Metriken*, um die geschätzte Zeit bis zur Fertigstellung und den Fertigstellungsgrad für den aktuellen Auftrag anzuzeigen. Wählen Sie dann im Abschnitt „Grafana“ die Option „EC-Übersicht“ aus. Sehen Sie sich die Dashboards *Geschätzte Zeit bis zur Fertigstellung des Grid EC-Jobs* und *Prozentsatz der Fertigstellung des Grid EC-Jobs* an.
** Verwenden Sie diesen Befehl, um den Status eines bestimmten `repair-data` Betrieb:
+
`repair-data show-ec-repair-status --repair-id repair ID`

** Verwenden Sie diesen Befehl, um alle Reparaturen aufzulisten:
+
`repair-data show-ec-repair-status`

+
Die Ausgabe listet Informationen auf, einschließlich `repair ID` , für alle bisherigen und laufenden Reparaturen.



. Wenn die Ausgabe zeigt, dass der Reparaturvorgang fehlgeschlagen ist, verwenden Sie die `--repair-id` Option zum erneuten Versuch der Reparatur.
+
Mit diesem Befehl wird eine fehlgeschlagene Knotenreparatur unter Verwendung der Reparatur-ID 6949309319275667690 erneut versucht:

+
`repair-data start-ec-node-repair --repair-id 6949309319275667690`

+
Mit diesem Befehl wird eine fehlgeschlagene Volumereparatur unter Verwendung der Reparatur-ID 6949309319275667690 erneut versucht:

+
`repair-data start-ec-volume-repair --repair-id 6949309319275667690`



--
====
.Nach Abschluss
Sobald die getrennten Knoten außer Betrieb genommen wurden und alle Datenreparaturaufträge abgeschlossen sind, können Sie alle verbundenen Grid-Knoten nach Bedarf außer Betrieb nehmen.

Führen Sie anschließend die folgenden Schritte aus, nachdem Sie die Außerbetriebnahme abgeschlossen haben:

* Stellen Sie sicher, dass die Laufwerke des außer Betrieb genommenen Netzknotens gelöscht werden.  Verwenden Sie ein im Handel erhältliches Tool oder einen Dienst zum Löschen von Daten, um Daten dauerhaft und sicher von den Laufwerken zu entfernen.
* Wenn Sie einen Appliance-Knoten außer Betrieb genommen haben und die Daten auf der Appliance mithilfe einer Knotenverschlüsselung geschützt waren, verwenden Sie das StorageGRID Appliance Installer, um die Konfiguration des Schlüsselverwaltungsservers zu löschen (Clear KMS).  Sie müssen die KMS-Konfiguration löschen, wenn Sie die Appliance zu einem anderen Grid hinzufügen möchten. Anweisungen hierzu finden Sie unter https://docs.netapp.com/us-en/storagegrid-appliances/commonhardware/monitoring-node-encryption-in-maintenance-mode.html["Überwachen der Knotenverschlüsselung im Wartungsmodus"^] .

